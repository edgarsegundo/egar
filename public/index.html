<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF Form Filler</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body class="bg-gray-100 flex h-screen overflow-hidden">
  <!-- Sidebar -->
  <aside id="sidebar" class="w-64 bg-white shadow-md p-4 overflow-y-auto transition-all duration-300 flex flex-col">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg font-semibold text-gray-700">PDFs</h2>
      <button id="toggleSidebar" class="text-gray-500 hover:text-gray-700">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>
        </svg>
      </button>
    </div>
    
    <!-- Templates Section -->
    <div class="flex-1 mb-4 overflow-y-auto">
      <h3 class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide">Templates</h3>
      <!-- Toolbar de Ã­cones -->
      <div class="flex flex-wrap gap-2 mb-3" id="templatesToolbar">
        <button class="p-2 rounded hover:bg-gray-200" title="Adicionar">
          <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Editar">
          <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Excluir">
          <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Duplicar">
          <svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2"/><rect x="3" y="3" width="13" height="13" rx="2"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Favorito">
          <svg class="w-6 h-6 text-pink-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Compartilhar">
          <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 12v1a9 9 0 009 9h1m-1-9V3m0 0L7 7m5-4l5 4"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Baixar">
          <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5 5-5M12 4v12"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Upload">
          <svg class="w-6 h-6 text-orange-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5-5 5 5M12 4v12"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="ConfiguraÃ§Ãµes">
          <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path stroke-linecap="round" stroke-linejoin="round" d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06a1.65 1.65 0 001.82.33h.09a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51h.09a1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82v.09a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-gray-200" title="Ajuda">
          <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 14v.01M12 10a4 4 0 10-4 4h.01M12 18h.01"/></svg>
        </button>
      </div>
      <div id="templatesList" class="space-y-2">
        <!-- Templates will be loaded here -->
      </div>
    </div>
    
    <!-- Divider -->
    <div class="border-t border-gray-300 my-4"></div>
    
    <!-- Generated Files Section -->
    <div class="flex-1 overflow-y-auto">
      <h3 class="text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide">Arquivos Gerados</h3>
      <div id="generatedFilesList" class="space-y-2">
        <!-- Generated files will be loaded here -->
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 flex flex-col items-center p-6 overflow-y-auto">
    <button id="showSidebar" class="hidden self-start mb-4 text-gray-500 hover:text-gray-700">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"></path>
      </svg>
    </button>

    <h1 class="text-2xl font-bold mb-4">Editar e Salvar PDF</h1>

    <!-- Label do arquivo atual -->
    <div id="currentFileLabel" class="hidden mb-4 px-4 py-2 bg-blue-50 border border-blue-200 rounded-lg">
      <span class="text-sm text-gray-600">Arquivo atual: </span>
      <span id="currentFileName" class="text-sm font-semibold text-blue-700"></span>
    </div>

    <!-- Mode Toggle & Actions -->
    <div id="actionBar" class="mb-4 flex gap-2 items-center hidden">
      <button id="toggleModeBtn" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 font-medium">
        Modo: <span id="currentMode">Preenchimento</span>
      </button>
      <button id="saveConfigBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 hidden">
        Salvar ConfiguraÃ§Ã£o
      </button>
      <button id="clearFieldsBtn" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 hidden">
        Limpar Campos
      </button>
      <button id="cloneFileBtn" class="bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-700" title="Clonar arquivo atual">
        ðŸ“‹ Clonar Arquivo
      </button>
      <button id="syncToOriginBtn" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 hidden" title="Sincronizar posiÃ§Ãµes DO template original PARA este arquivo">
        ðŸ”„ Sincronizar da Origem
      </button>
    </div>

    <form id="uploadForm" class="flex gap-2 mb-4" style="display: none;">
      <input type="file" id="pdfFile" name="pdf" accept="application/pdf" class="border p-2 rounded">
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Upload PDF</button>
    </form>

    <div id="pdfContainer" class="relative border shadow-lg"></div>

    <button id="downloadBtn" class="mt-4 bg-green-600 text-white px-4 py-2 rounded hidden hover:bg-green-700">Baixar PDF Preenchido</button>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>  
  <script src="./script.js"></script>
</body>
</html>
